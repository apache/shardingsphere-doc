<!DOCTYPE html>
<html lang="en-us">
    <head>
        <style>
            a {
                word-wrap: break-word;
            }
        </style>
    </head>  
    <body>
        <head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Simplifying Learning: ShardingSphere’s Template Engine for Streamlined Examples &middot; ShardingSphere - Blog</title>

		
  		<link rel="stylesheet" href="https://shardingsphere.apache.org/blog/css/style.css">
		<link rel="stylesheet" href="https://shardingsphere.apache.org/blog/css/fonts.css">
		
		<link rel="icon" type="image/png" sizes="32x32" href="https://shardingsphere.apache.org/blog/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="https://shardingsphere.apache.org/blog/images/favicon-16x16.png">
		<link rel="apple-touch-icon" sizes="180x180" href="https://shardingsphere.apache.org/blog/images/apple-touch-icon.png">

		
		<link href="" rel="alternate" type="application/rss+xml" title="ShardingSphere - Blog" />
	</head>

        <div style="position: sticky; position: -webkit-sticky; top: 0px; background-color: rgba(255, 255, 255, 0.888);">		<nav class="nav">
			<div class="nav-container">
				<a href="https://shardingsphere.apache.org/blog/">
					<h1 class="nav-title">ShardingSphere - Blog</h1>
				</a>

				<span style="padding-left: 65px;">
					
					
					<li>
						<a href="https://shardingsphere.apache.org/blog/en/material/">
							<h3>Articles</h3>
						</a>
					</li>
					
					<li>
						<a href="https://shardingsphere.apache.org/blog/en/videos/">
							<h3>Videos</h3>
						</a>
					</li>
					
				</span>

				<span style="position: relative; left: 75px; 
				background: rgba(0, 0, 0, 0.664);
				font-weight: bold;
				padding:0.1rem; 
				padding-left:15px; 
				padding-right:15px; 
				padding-top: 2px; 
				padding-bottom: 5px; 
				border-radius:10px;">
					
				</span>
			</div>
			</div>
		</nav></div>
        

<main>
	<div class="post">
		<h1 class="post-title">Simplifying Learning: ShardingSphere’s Template Engine for Streamlined Examples</h1>

		<div class="post-info">
        
</div>

		

		<p><img src="https://shardingsphere.apache.org/blog/img/2023_05_10_Simplifying_Learning_ShardingSphere%E2%80%99s_Template_Engine_for_Streamlined_Examples.en.md1.jpeg" alt="img"></p>
<p>After years of rapid development, ShardingSphere has grown significantly, offering six core functional modules that cater to various needs. It is also compatible with different registries, such as ZooKeeper and Nacos, allowing for seamless integration. Moreover, it supports distributed transactions and various development frameworks, providing flexibility and convenience.</p>
<p>To ensure a user-friendly experience, we have created an example module that showcases the diverse functionalities, registries, and service frameworks of ShardingSphere.</p>
<p>This example system serves as a demonstration of how these components can be effectively combined, along with an abstraction of business logic. Take a look at the illustration of our example system below:</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_05_10_Simplifying_Learning_ShardingSphere%E2%80%99s_Template_Engine_for_Streamlined_Examples.en.md2.jpeg" alt="img"></p>
<h1 id="analyzing-the-issue">Analyzing the Issue</h1>
<p>Let me start by showing you the structure of Yogiyo’s order service. When order creation, cancellation, or update traffic occurs, the Orderyo application code distributes the write load to four shard clusters based on the <code>customer_id</code>. This way, the application only needs the <code>customer_id</code> to find the shard cluster it needs to access and perform the operation.</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md2.jpeg" alt="img">Figure 1 — ShardingSphere’s former example directory structure</p>
<h1 id="enhancing-the-example-module-for-improved-user-experience">Enhancing the Example Module for Improved User Experience</h1>
<p>The example module of ShardingSphere has undergone significant evolution, incorporating a wide range of functionality. However, this growth has resulted in challenges for users, including difficulties in quickly finding the desired example and comprehending the shared business logic code.</p>
<p>After extensive discussions within the community, we have identified several key issues with the current examples:</p>
<p><strong>1. Lack of Representation:</strong> The example modules fail to clearly represent the features and structure of ShardingSphere, as they utilize a different abstraction level than the ShardingSphere module hierarchy. This discrepancy causes confusion among users.</p>
<p><strong>2. Complexity of Business Code:</strong> The reliance on complex, generic, and abstract public business code poses a significant learning obstacle for users. The abundance of such code makes it challenging to grasp the core concepts effectively.</p>
<p><strong>3. Non-standardized Configuration:</strong> The configuration approach employed in the current examples lacks standardization and is predominantly focused on logic handling rather than leveraging the native capabilities of ShardingSphere. This limitation restricts the system’s ability to support a broad range of scenarios.</p>
<p><strong>4. Limited Sample Portfolio:</strong> The existing sample portfolio is relatively small and lacks the necessary flexibility to cater to different service frameworks and modules, such as JDBC and spring boot + JDBC. This limitation restricts the versatility and applicability of ShardingSphere.</p>
<p><strong>5. Proxy Example Focus:</strong> The ShardingSphere Proxy example should prioritize configuration guidance over the introduction of numerous logical examples. This shift will enable users to better understand and utilize the Proxy example effectively.</p>
<p>To address these concerns and provide users with an enhanced and intuitive experience, we are actively working on refining the example module of ShardingSphere. Our implementation principle is based on the following key considerations:</p>
<p><strong>1. Flexibility and Combinability:</strong>  Our goal is to enable users to freely combine and select the modules and features they require for ShardingSphere, allowing for different combinations.</p>
<p><strong>2. Modularization and Preformatting:</strong> Through thorough analysis and research, we have disassembled the ShardingSphere modules into minimal combinable units. These units have been preformatted in various scenarios using the <a href="https://freemarker.apache.org/">FreeMarker template engine</a>. When users select a specific scenario combination, the corresponding example project is automatically generated by extracting the relevant logical units.</p>
<p>By implementing these improvements, we empower users to easily navigate and understand the examples, while providing the necessary flexibility to adapt ShardingSphere to their specific needs. Figure 2 illustrates the smallest logical unit of the encryption module within this new approach.</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md3.jpeg" alt="img">Figure 2 — Minimum logical unit of the encryption module</p>
<h1 id="improved-flexibility-and-reduced-learning-cost">Improved Flexibility and Reduced Learning Cost</h1>
<p>To enhance the flexibility and user experience of the example module, we have taken a step further by splitting the smallest logical unit of functional code. This enables users to combine functional features according to their specific requirements, providing on-demand access.</p>
<p>Additionally, we have addressed the issue of complex business code by templating the original public business logic. By removing the abstract logic and reducing the learning cost, users can easily understand and utilize the examples.</p>
<p>Figure 3 illustrates how these improvements have been implemented:</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md4.jpeg" alt="img">Figure 3 — Public business logic templates</p>
<p>In the updated approach, the core functional modules’ code logic has been split into smaller, more manageable units. These units can be seamlessly combined based on the user’s choice, allowing for a customized experience.</p>
<p>Furthermore, the abstract logic of the business code has been streamlined through the use of templates. This approach significantly reduces the complexity and learning curve for users, ensuring a smoother onboarding process.</p>
<p>With these enhancements, users can effectively navigate the example module, freely select the desired features, and swiftly grasp the underlying concepts.</p>
<p>Additionally, we have divided the functional features into categories like encryption and decryption, read/write splitting, and database and table separation. The supported configuration types are outlined in detail in Table 1.</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md5.jpeg" alt="img"></p>
<p>Based on the configuration types we abstracted, the module names of the sample module code were sorted and redefined to make it easier for users to find and use. This is shown below:</p>
<pre><code>shardingsphere-${product}-sample/${feature}--${framework}--${mode}--${transaction}
</code></pre><p>In summary, the updated example module leverages the power of the FreeMarker template engine. This approach significantly enhances flexibility by splitting the functional code into minimal logical units, abstracting business templates with business code, and standardizing module names. The result is a highly flexible example module that offers improved organization and usability:</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md6.jpeg" alt="img">Figure 4 — Example generation engine logic structure</p>
<p>Each module generated within this framework is a standalone project, allowing for individual testing and independent use. This approach ensures that users can effectively utilize and validate the functionality of each module according to their specific requirements.</p>
<h1 id="using-the-example-generation-module">Using the Example Generation Module</h1>
<h2 id="1-locate-the-example-generation-module">1. Locate the Example Generation Module</h2>
<p>Navigate to the <a href="https://github.com/apache/shardingsphere">ShardingSphere project directory</a> and find the <code>shardingsphere-jdbc-example-generator</code> module within the corresponding example module. This module contains all the template files and generation logic required for generating examples.</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md6.jpeg" alt="img">Figure 5 — Project structure of the generation engine</p>
<h2 id="2-configure-the-generation-engine-parameters">2. Configure the Generation Engine Parameters</h2>
<p>The <code>shardingsphere-jdbc-example-generator</code> module is a standard Java project. The project&rsquo;s configuration file can be found at <code>resources/config.yaml</code>. This file allows users to declare various parameters supported by the generation engine. In addition to the template parameters for specific functions, we have also provided convenient configurations that users can customize according to their needs. The specific parameters and their meanings are outlined in Table 2:</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md7.jpeg" alt="img"></p>
<h2 id="3-generate-the-configuration-module">3. Generate the Configuration Module</h2>
<p>After configuring the parameters, it’s time to generate the corresponding configuration module. This can be done in two ways:</p>
<ul>
<li>
<p><strong>Running the Main Class:</strong> Locate the <code>ExampleGeneratorMain</code> class under the <code>shardingsphere-jdbc-example-generator</code> module and run the main method. This will generate the example in the configured output directory.</p>
</li>
<li>
<p><strong>Using Maven Command Line:</strong> Alternatively, you can use the Maven command line to trigger the generation process. The command should be executed as follows:</p>
</li>
</ul>
<pre><code>// generate configuration based on config.yaml
./mvnw -B clean install -f examples/shardingsphere-jdbc-example-generator/pom.xml -Pexample-generator

// generation configuration based on command parameters
./mvnw -B clean install -f examples/shardingsphere-jdbc-example-generator/pom.xml -Pexample-generator -Dproducts=jdbc -Dmodes=cluster-zookeeper -Dtransactions=local -Dfeatures=shadow -Dframeworks=jdbc
</code></pre><h2 id="4-view-and-utilize-the-examples">4. View and Utilize the Examples</h2>
<p>Once the generation process is triggered, the associated example code will be generated in the configured output directory. Typically, this would be in the <code>shardingsphere-jdbc-example-generator/target/generated-sources/ directory</code>. The generated directory structure can be seen in Figure 6 below:</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md8.jpeg" alt="img">Figure 6 — Directory structure for generating examples</p>
<p>Within the generated directory, each project module is a standard Maven project. You can directly open it using an IDE like IntelliJ IDEA, and run the project. This will result in a project structure as shown in Figure 7:</p>
<p><img src="https://shardingsphere.apache.org/blog/img/2023_04_27_How_South_Korea%E2%80%99s_Yogiyo_Improved_Scalability_and_Performance_with_Apache_ShardingSphere.en.md9.jpeg" alt="img">Figure 7 — Generated example project structure</p>
<p>By following these steps, you can effectively use the example generation module to generate the desired configuration modules and leverage the provided examples to enhance your understanding and utilization of ShardingSphere.</p>
<h1 id="introducing-the-jdbc-example-and-future-improvements">Introducing the JDBC Example and Future Improvements</h1>
<p>We are pleased to announce that we have successfully implemented the template engine for generating example code. As a result, we have developed the initial version of the JDBC example. However, we acknowledge that the current example is relatively basic in terms of the disassembled minimum logical unit. It is also relatively simple and focuses on a single scenario. To provide a more comprehensive and flexible experience, we plan to make further refinements.</p>
<h2 id="our-future-plans-include">Our future plans include:</h2>
<ol>
<li>
<p>Enhancing the Minimum Logical Unit: We aim to break down the code into smaller and more granular logical units. This will provide users with greater flexibility to combine and configure the desired functionality according to their specific requirements.</p>
</li>
<li>
<p>Adding Additional Configurations: We recognize the need to incorporate more configurations to cater to a wider range of use cases. By expanding the available configuration options, users will have a more comprehensive set of tools at their disposal.</p>
</li>
<li>
<p>Improving Usage Documentation: We understand the importance of clear and concise documentation. We will focus on enhancing the documentation to ensure users can easily understand and utilize the features of ShardingSphere.</p>
</li>
</ol>
<p>We appreciate your interest and support in making ShardingSphere better and more powerful. Your participation is invaluable as we strive to improve the flexibility, completeness, and overall user experience of ShardingSphere. Together, we can shape a robust and user-friendly platform that meets the diverse needs of the community.</p>


		
	</div>

	<div class="pagination">
		<a href="https://shardingsphere.apache.org/blog/en/material/2023_05_18_enhancing_database_security_shardingsphere-proxys_authentication/" class="left arrow">&#8592;</a>
		<a href="https://shardingsphere.apache.org/blog/en/material/2023_04_27_how_south_koreas_yogiyo_improved_scalability_and_performance_with_apache_shardingsphere/" class="right arrow">&#8594;</a>

		<a href="#" class="top">Top</a>
	</div>
</main>


        		<footer>
			<span>
			
			Copyright &copy; 2018-2020, <a href="https://shardingsphere.apache.org/blog/">Apache ShardingSphere</a>, ShardingSphere, Apache, the Apache feather logo, and the Apache ShardingSphere project logo are either registered trademarks or trademarks of The Apache Software Foundation in the United States and other countries.
			</span>
		</footer>

    </body>
</html>
