1c1
< commit 89c6a5579166331cfae250e872b874dc033435ad
---
> commit e83962e7acc670c071a81edfdaeea367eb3d5856
3c3
< Date:   Wed Sep 23 01:01:44 2020 +0800
---
> Date:   Wed Sep 23 23:09:40 2020 +0800
5c5,17
<     Rename package name to replication.primaryreplica (#7571)
---
>     Rename PrimaryReplicaReplication in code (#7579)
>     
>     * Rename PrimaryReplicaReplication in code
>     
>     * Rename PrimaryReplicaReplication in integrated test cases
>     
>     * Rename PrimaryReplicaReplication in integrated test cases
>     
>     * Fix data
>     
>     * Fix data
>     
>     * Refactor test case for shardingsphere-jdbc-governance-spring-namespace
7,50c19,423
< diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.cn.md b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.cn.md
< index 319591849e..912a8e196c 100644
< --- a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.cn.md
< +++ b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.cn.md
< @@ -5,7 +5,7 @@ weight = 2
<  
<  ## 配置入口
<  
< -类名称：org.apache.shardingsphere.masterslave.api.config.MasterSlaveRuleConfiguration
< +类名称：MasterSlaveRuleConfiguration
<  
<  可配置属性：
<  
< @@ -16,7 +16,7 @@ weight = 2
<  
<  ## 主从数据源配置
<  
< -类名称：org.apache.shardingsphere.masterslave.api.config.rule.MasterSlaveDataSourceRuleConfiguration
< +类名称：MasterSlaveDataSourceRuleConfiguration
<  
<  可配置属性：
<  
< diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.en.md b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.en.md
< index 158571edbc..fc0596d4df 100644
< --- a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.en.md
< +++ b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/java-api/read-write-split.en.md
< @@ -5,7 +5,7 @@ weight = 2
<  
<  ## Root Configuration
<  
< -Class name: org.apache.shardingsphere.masterslave.api.config.MasterSlaveRuleConfiguration
< +Class name: MasterSlaveRuleConfiguration
<  
<  Attributes:
<  
< @@ -16,7 +16,7 @@ Attributes:
<  
<  ## Master Slave Data Source Configuration
<  
< -Class name: org.apache.shardingsphere.masterslave.api.config.rule.MasterSlaveDataSourceRuleConfiguration
< +Class name: MasterSlaveDataSourceRuleConfiguration
<  
<  Attributes:
<  
---
> diff --git a/docs/document/content/features/governance/management/registry-center.cn.md b/docs/document/content/features/governance/management/registry-center.cn.md
> index 70678e0231..2dccf304f7 100644
> --- a/docs/document/content/features/governance/management/registry-center.cn.md
> +++ b/docs/document/content/features/governance/management/registry-center.cn.md
> @@ -59,5 +59,5 @@ Zookeeper 命令如下：
>  Zookeeper 命令如下：
>  
>  ```
> -[zk: localhost:2181(CONNECTED) 0] set /${your_zk_namespace}/states/datanodes/${your_schema_name}/${your_slave_datasource_name} DISABLED
> +[zk: localhost:2181(CONNECTED) 0] set /${your_zk_namespace}/states/datanodes/${your_schema_name}/${your_replica_datasource_name} DISABLED
>  ```
> diff --git a/docs/document/content/features/governance/management/registry-center.en.md b/docs/document/content/features/governance/management/registry-center.en.md
> index 9c68860683..62e6f81077 100644
> --- a/docs/document/content/features/governance/management/registry-center.en.md
> +++ b/docs/document/content/features/governance/management/registry-center.en.md
> @@ -57,5 +57,5 @@ Under read-write split scenarios, users can write `DISABLED` (case insensitive)
>  Zookeeper command is as follows:
>  
>  ```
> -[zk: localhost:2181(CONNECTED) 0] set /${your_zk_namespace}/states/datanodes/${your_schema_name}/${your_slave_datasource_name} DISABLED
> +[zk: localhost:2181(CONNECTED) 0] set /${your_zk_namespace}/states/datanodes/${your_schema_name}/${your_replica_datasource_name} DISABLED
>  ```
> diff --git a/docs/document/content/features/test-engine/performance-test.cn.md b/docs/document/content/features/test-engine/performance-test.cn.md
> index 1a575102d9..39bf3499d2 100644
> --- a/docs/document/content/features/test-engine/performance-test.cn.md
> +++ b/docs/document/content/features/test-engine/performance-test.cn.md
> @@ -114,7 +114,7 @@ shardingRule:
>  schemaName: sharding_db
>  
>  dataSources:
> -  master_ds:
> +  primary_ds:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -122,7 +122,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_0:
> +  replica_ds_0:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -131,10 +131,10 @@ dataSources:
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
>  masterSlaveRule:
> -  name: ms_ds
> -  masterDataSourceName: master_ds
> +  name: pr_ds
> +  masterDataSourceName: primary_ds
>    slaveDataSourceNames:
> -    - slave_ds_0
> +    - replica_ds_0
>  ```
>  
>  #### 主从+加密+分库分表配置
> @@ -143,7 +143,7 @@ masterSlaveRule:
>  schemaName: sharding_db
>  
>  dataSources:
> -  master_ds_0:
> +  primary_ds_0:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -151,7 +151,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_0:
> +  replica_ds_0:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -159,7 +159,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  master_ds_1:
> +  primary_ds_1:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -167,7 +167,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_1:
> +  replica_ds_1:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -175,7 +175,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  master_ds_2:
> +  primary_ds_2:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -183,7 +183,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_2:
> +  replica_ds_2:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -191,7 +191,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  master_ds_3:
> +  primary_ds_3:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -199,7 +199,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_3:
> +  replica_ds_3:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -210,11 +210,11 @@ dataSources:
>  shardingRule:
>    tables:
>      tbl:
> -      actualDataNodes: ms_ds_${0..3}.tbl${0..1023}
> +      actualDataNodes: pr_ds_${0..3}.tbl${0..1023}
>        databaseStrategy:
>          inline:
>            shardingColumn: id
> -          algorithmExpression: ms_ds_${id % 4}
> +          algorithmExpression: pr_ds_${id % 4}
>        tableStrategy:
>          inline:
>            shardingColumn: k
> @@ -224,29 +224,29 @@ shardingRule:
>          column: id
>    bindingTables:
>      - tbl
> -  defaultDataSourceName: master_ds_1
> +  defaultDataSourceName: primary_ds_1
>    defaultTableStrategy:
>      none:
>    masterSlaveRules:
> -    ms_ds_0:
> -      masterDataSourceName: master_ds_0
> +    pr_ds_0:
> +      masterDataSourceName: primary_ds_0
>        slaveDataSourceNames:
> -        - slave_ds_0
> +        - replica_ds_0
>        loadBalanceAlgorithmType: ROUND_ROBIN
> -    ms_ds_1:
> -      masterDataSourceName: master_ds_1
> +    pr_ds_1:
> +      masterDataSourceName: primary_ds_1
>        slaveDataSourceNames:
> -        - slave_ds_1
> +        - replica_ds_1
>        loadBalanceAlgorithmType: ROUND_ROBIN
> -    ms_ds_2:
> -      masterDataSourceName: master_ds_2
> +    pr_ds_2:
> +      masterDataSourceName: primary_ds_2
>        slaveDataSourceNames:
> -        - slave_ds_2
> +        - replica_ds_2
>        loadBalanceAlgorithmType: ROUND_ROBIN
> -    ms_ds_3:
> -      masterDataSourceName: master_ds_3
> +    pr_ds_3:
> +      masterDataSourceName: primary_ds_3
>        slaveDataSourceNames:
> -        - slave_ds_3
> +        - replica_ds_3
>        loadBalanceAlgorithmType: ROUND_ROBIN
>  encryptRule:
>    encryptors:
> diff --git a/docs/document/content/features/test-engine/performance-test.en.md b/docs/document/content/features/test-engine/performance-test.en.md
> index c5ed69a6e6..66721a02bb 100644
> --- a/docs/document/content/features/test-engine/performance-test.en.md
> +++ b/docs/document/content/features/test-engine/performance-test.en.md
> @@ -115,7 +115,7 @@ shardingRule:
>  schemaName: sharding_db
>  
>  dataSources:
> -  master_ds:
> +  primary_ds:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -123,7 +123,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_0:
> +  replica_ds_0:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -132,10 +132,10 @@ dataSources:
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
>  masterSlaveRule:
> -  name: ms_ds
> -  masterDataSourceName: master_ds
> +  name: pr_ds
> +  masterDataSourceName: primary_ds
>    slaveDataSourceNames:
> -    - slave_ds_0
> +    - replica_ds_0
>  ```
>  
>  #### Master Slave & Encrypt & Sharding Configuration
> @@ -144,7 +144,7 @@ masterSlaveRule:
>  schemaName: sharding_db
>  
>  dataSources:
> -  master_ds_0:
> +  primary_ds_0:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -152,7 +152,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_0:
> +  replica_ds_0:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -160,7 +160,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  master_ds_1:
> +  primary_ds_1:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -168,7 +168,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_1:
> +  replica_ds_1:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -176,7 +176,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  master_ds_2:
> +  primary_ds_2:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -184,7 +184,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_2:
> +  replica_ds_2:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -192,7 +192,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  master_ds_3:
> +  primary_ds_3:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -200,7 +200,7 @@ dataSources:
>      idleTimeoutMilliseconds: 60000
>      maxLifetimeMilliseconds: 1800000
>      maxPoolSize: 200
> -  slave_ds_3:
> +  replica_ds_3:
>      url: jdbc:mysql://***.***.***.***:****/ds?serverTimezone=UTC&useSSL=false
>      username: test
>      password:
> @@ -211,11 +211,11 @@ dataSources:
>  shardingRule:
>    tables:
>      tbl:
> -      actualDataNodes: ms_ds_${0..3}.tbl${0..1023}
> +      actualDataNodes: pr_ds_${0..3}.tbl${0..1023}
>        databaseStrategy:
>          inline:
>            shardingColumn: id
> -          algorithmExpression: ms_ds_${id % 4}
> +          algorithmExpression: pr_ds_${id % 4}
>        tableStrategy:
>          inline:
>            shardingColumn: k
> @@ -225,29 +225,29 @@ shardingRule:
>          column: id
>    bindingTables:
>      - tbl
> -  defaultDataSourceName: master_ds_1
> +  defaultDataSourceName: primary_ds_1
>    defaultTableStrategy:
>      none:
>    masterSlaveRules:
> -    ms_ds_0:
> -      masterDataSourceName: master_ds_0
> +    pr_ds_0:
> +      masterDataSourceName: primary_ds_0
>        slaveDataSourceNames:
> -        - slave_ds_0
> +        - replica_ds_0
>        loadBalanceAlgorithmType: ROUND_ROBIN
> -    ms_ds_1:
> -      masterDataSourceName: master_ds_1
> +    pr_ds_1:
> +      masterDataSourceName: primary_ds_1
>        slaveDataSourceNames:
> -        - slave_ds_1
> +        - replica_ds_1
>        loadBalanceAlgorithmType: ROUND_ROBIN
> -    ms_ds_2:
> -      masterDataSourceName: master_ds_2
> +    pr_ds_2:
> +      masterDataSourceName: primary_ds_2
>        slaveDataSourceNames:
> -        - slave_ds_2
> +        - replica_ds_2
>        loadBalanceAlgorithmType: ROUND_ROBIN
> -    ms_ds_3:
> -      masterDataSourceName: master_ds_3
> +    pr_ds_3:
> +      masterDataSourceName: primary_ds_3
>        slaveDataSourceNames:
> -        - slave_ds_3
> +        - replica_ds_3
>        loadBalanceAlgorithmType: ROUND_ROBIN
>  encryptRule:
>    encryptors:
> diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/_index.cn.md b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/_index.cn.md
> index 9ce389ceb3..a16aea7e86 100644
> --- a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/_index.cn.md
> +++ b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/_index.cn.md
> @@ -94,12 +94,12 @@ dataSource: # <!!数据库连接池实现类> `!!`表示实例化该类
>  dataSources:
>    ds_0: !!org.apache.commons.dbcp2.BasicDataSource
>      driverClassName: org.h2.Driver
> -    url: jdbc:h2:mem:ds_m;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false;MODE=MYSQL
> +    url: jdbc:h2:mem:ds_0;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false;MODE=MYSQL
>      username: sa
>      password:
>    ds_1: !!org.apache.commons.dbcp2.BasicDataSource
>      driverClassName: org.h2.Driver
> -    url: jdbc:h2:mem:ds_s;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false;MODE=MYSQL
> +    url: jdbc:h2:mem:ds_1;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=false;MODE=MYSQL
>      username: sa
>      password:
>  ```
> diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.cn.md b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.cn.md
> index de03f899cf..98683c2f9a 100644
> --- a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.cn.md
> +++ b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.cn.md
> @@ -9,10 +9,10 @@ weight = 2
>  dataSources: # 省略数据源配置
>  
>  rules:
> -- !MASTER_SLAVE
> +- !PRIMARY_REPLICA_REPLICATION
>    dataSources:
>      <data-source-name> (+): # 读写分离逻辑数据源名称
> -      masterDataSourceName: # 主库数据源名称
> +      primaryDataSourceName: # 主库数据源名称
>        slaveDataSourceNames: 
>          - <slave-data_source-name> (+) # 从库数据源名称
>        loadBalancerName: # 负载均衡算法名称
> diff --git a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.en.md b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.en.md
> index b1de4322f4..153bc33b45 100644
> --- a/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.en.md
> +++ b/docs/document/content/user-manual/shardingsphere-jdbc/configuration/yaml/read-write-split.en.md
> @@ -9,10 +9,10 @@ weight = 2
>  dataSource: # Omit data source configuration
>  
>  rules:
> -- !MASTER_SLAVE
> +- !PRIMARY_REPLICA_REPLICATION
>    dataSources:
>      <data-source-name> (+): # Logic data source name of master slave
> -      masterDataSourceName: # Master data source name
> +      primaryDataSourceName: # Primary data source name
>        slaveDataSourceNames: 
>          - <slave-data-source-name> (+) # Slave data source name
>        loadBalancerName: # Load balance algorithm name
